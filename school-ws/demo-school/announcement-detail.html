<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="学校公告详情页面">
    <meta name="keywords" content="公告，详情，校园">
    <meta property="og:title" content="公告详情 - 示范中学">
    <meta property="og:description" content="查看完整的公告信息和详情">
    
    <title>公告详情 - 示范中学</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #3b82f6;
            --primary-dark: #1e40af;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .glass {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .glass-light {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            background-color: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px);
        }
        
        .badge-tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            display: inline-block;
        }
        
        .badge-important {
            background-color: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .badge-hot {
            background-color: rgba(249, 115, 22, 0.2);
            color: #fed7aa;
            border: 1px solid rgba(249, 115, 22, 0.3);
        }
        
        .badge-normal {
            background-color: rgba(59, 130, 246, 0.2);
            color: #bfdbfe;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        /* 轮播样式 */
        .carousel {
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
        }
        
        .carousel-slide {
            display: none;
            width: 100%;
        }
        
        .carousel-slide.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .carousel-slide img {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.15);
            color: white;
            border: none;
            padding: 12px 16px;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .carousel-nav:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-nav.prev {
            left: 16px;
        }
        
        .carousel-nav.next {
            right: 16px;
        }
        
        .carousel-dots {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .dot.active {
            background-color: white;
            transform: scale(1.3);
        }
        
        /* 文章正文样式 */
        .article-content {
            max-width: 768px;
            margin: 0 auto;
        }
        
        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 1rem;
            margin: 1.5rem 0;
        }
        
        .article-content p {
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        .article-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .article-content ul, .article-content ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .article-content li {
            margin-bottom: 0.5rem;
        }
        
        /* 相关公告 */
        .related-card {
            transition: all 0.3s ease;
        }
        
        .related-card:hover {
            transform: translateY(-4px);
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        .breadcrumb {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .breadcrumb a {
            color: #dbeafe;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .breadcrumb a:hover {
            color: white;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="glass sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center">
                        <i class="fas fa-graduation-cap text-white text-lg"></i>
                    </div>
                    <div class="hidden sm:block">
                        <h1 class="text-lg font-bold text-white">示范中学</h1>
                        <p class="text-xs text-blue-100">公告站</p>
                    </div>
                </div>
                
                <div class="hidden md:flex gap-6">
                    <a href="index.html" class="text-blue-100 hover:text-blue-200 transition">首页</a>
                    <a href="announcements.html" class="text-white font-medium">公告列表</a>
                    <a href="publish.html" class="text-blue-100 hover:text-blue-200 transition">发布公告</a>
                </div>
                
                <a href="announcements.html" class="md:hidden text-white hover:bg-white/10 p-2 rounded-lg">
                    <i class="fas fa-arrow-left text-xl"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- 主内容 -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pb-24 md:pb-12">
        <!-- 面包屑导航 -->
        <nav class="breadcrumb text-blue-100 text-sm mb-8" aria-label="Breadcrumb">
            <a href="index.html"><i class="fas fa-home mr-1"></i>首页</a>
            <span>/</span>
            <a href="announcements.html">公告列表</a>
            <span>/</span>
            <span class="text-white">公告详情</span>
        </nav>

        <!-- 公告详情容器 -->
        <article class="glass rounded-2xl overflow-hidden" id="announcementDetail">
            <!-- 加载状态会被替换 -->
            <div class="p-8 text-center text-blue-100">
                <i class="fas fa-spinner text-4xl animate-spin mb-4"></i>
                <p>加载中...</p>
            </div>
        </article>

        <!-- 相关公告 -->
        <section class="mt-16">
            <h3 class="text-2xl font-bold text-white mb-8">相关公告</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="relatedAnnouncements">
                <!-- 会动态填充 -->
            </div>
        </section>

        <!-- 评论区域（示例） -->
        <section class="mt-16">
            <h3 class="text-2xl font-bold text-white mb-8">讨论区</h3>
            <div class="glass rounded-2xl p-8">
                <form id="commentForm" onsubmit="submitComment(event)">
                    <div class="mb-4">
                        <label class="block text-white text-sm font-medium mb-2">您的名字</label>
                        <input type="text" class="w-full glass-light text-white rounded-lg px-4 py-2 outline-none placeholder-blue-200" placeholder="输入您的名字" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-white text-sm font-medium mb-2">留言内容</label>
                        <textarea class="w-full glass-light text-white rounded-lg px-4 py-2 outline-none placeholder-blue-200 resize-none" rows="4" placeholder="输入您的留言..." required></textarea>
                    </div>
                    <button type="submit" class="btn-primary text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition">
                        <i class="fas fa-paper-plane mr-2"></i>提交留言
                    </button>
                </form>
                
                <div id="commentsContainer" class="mt-8 space-y-4">
                    <!-- 评论会动态加载 -->
                </div>
            </div>
        </section>
    </main>

    <!-- 底部导航（移动端） -->
    <nav class="glass fixed bottom-0 left-0 right-0 md:hidden z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-around items-center h-16">
                <a href="index.html" class="flex flex-col items-center gap-1 text-blue-100 hover:text-blue-300 transition">
                    <i class="fas fa-home text-xl"></i>
                    <span class="text-xs">首页</span>
                </a>
                <a href="announcements.html" class="flex flex-col items-center gap-1 text-blue-300 font-medium">
                    <i class="fas fa-list text-xl"></i>
                    <span class="text-xs">列表</span>
                </a>
                <a href="publish.html" class="flex flex-col items-center gap-1 text-blue-100 hover:text-blue-300 transition">
                    <i class="fas fa-plus text-xl"></i>
                    <span class="text-xs">发布</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- 页脚 -->
    <footer class="glass mt-24 pt-12 pb-24 md:pb-12 text-center text-blue-200 text-sm border-t border-white/10">
        <div class="max-w-7xl mx-auto px-4">
            <p class="mb-4">
                <strong>示范中学</strong> | 校园公告官方平台
            </p>
            <p>© 2024 示范中学. 保留所有权利。</p>
        </div>
    </footer>

    <script>
        // ============ 公告详情数据 ============
        const announcementsMap = {
            1: {
                id: 1,
                title: '2024年秋季学期开学时间调整通知',
                category: 'notice',
                date: '2024-08-20',
                author: '教务处',
                badge: 'important',
                views: 456,
                images: [
                    'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1491841573634-28140173b129?w=800&h=400&fit=crop'
                ],
                attachments: ['notice.pdf'],
                content: `
                    <h3>开学时间调整</h3>
                    <p>根据教育部最新要求，我校决定调整2024年秋季学期开学时间。原计划8月25日开学，现更改为：</p>
                    <ul>
                        <li>新生报到时间：<strong>8月26日</strong>（上午9:00-12:00，下午14:00-17:00）</li>
                        <li>老生报到时间：<strong>8月27日</strong>（全天）</li>
                        <li>正式开课时间：<strong>8月28日</strong></li>
                    </ul>
                    
                    <h3>报到地点</h3>
                    <p>所有学生在学校操场及各班级教室报到。请各班级提前在班级群中确认学生姓名和返校时间。</p>
                    
                    <h3>特别提醒</h3>
                    <ul>
                        <li>学生返校时需要出示健康码和行程码</li>
                        <li>请提前准备好各项证件和材料</li>
                        <li>返校期间做好个人卫生防护</li>
                        <li>家长可在校门口接送，请不要进入校园内部</li>
                    </ul>
                    
                    <p>如有疑问，可致电教务处：<strong>010-1234-5678</strong></p>
                `
            },
            2: {
                id: 2,
                title: '第十届校运动会报名截止延期通知',
                category: 'event',
                date: '2024-08-18',
                author: '学生处',
                badge: 'normal',
                views: 234,
                images: [
                    'https://images.unsplash.com/photo-1516534775068-bb57a88a5eed?w=800&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1519046904884-53103b34b206?w=800&h=400&fit=crop'
                ],
                attachments: [],
                content: `
                    <p>由于最近台风影响，为确保学生和运动员的安全，学校决定延期举办第十届校运动会。</p>
                    
                    <h3>报名截止时间变更</h3>
                    <ul>
                        <li>原截止时间：8月18日（已过期）</li>
                        <li><strong>新截止时间：8月25日晚上18:00</strong></li>
                    </ul>
                    
                    <h3>参赛项目</h3>
                    <p>本次运动会设有以下项目：</p>
                    <ul>
                        <li>田径项目：100米、200米、400米、800米、1500米、跳高、跳远、铅球、接力赛</li>
                        <li>团队项目：拔河比赛、集体跳绳、接力赛</li>
                        <li>趣味项目：投篮、踢毽子、跳沙坑</li>
                    </ul>
                    
                    <h3>报名方式</h3>
                    <p>各班级请在班级体育委员处登记参赛学生信息，或直接到学生处报名。</p>
                    
                    <p><strong>联系电话：</strong>010-9876-5432</p>
                `
            },
            3: {
                id: 3,
                title: '2024年校级先进班集体评比结果公示',
                category: 'news',
                date: '2024-08-15',
                author: '学生处',
                badge: 'normal',
                views: 189,
                images: [
                    'https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&h=400&fit=crop'
                ],
                attachments: ['result.pdf'],
                content: `
                    <p>经过综合评比，以下班级荣获2024年校级先进班集体称号，特此公示：</p>
                    
                    <h3>高三年级</h3>
                    <ul>
                        <li>高三1班</li>
                        <li>高三3班</li>
                        <li>高三5班</li>
                    </ul>
                    
                    <h3>高二年级</h3>
                    <ul>
                        <li>高二2班</li>
                        <li>高二4班</li>
                    </ul>
                    
                    <h3>高一年级</h3>
                    <ul>
                        <li>高一1班</li>
                        <li>高一3班</li>
                        <li>高一6班</li>
                    </ul>
                    
                    <p>获奖班级将在开学后获得荣誉证书和相应的物质奖励。希望全校各班级以获奖班级为标杆，继续努力，创建更多的先进班集体。</p>
                `
            },
            4: {
                id: 4,
                title: '关于举办2024年"绿色校园"环保知识竞赛的通知',
                category: 'event',
                date: '2024-08-12',
                author: '团委',
                badge: 'hot',
                views: 512,
                images: [
                    'https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=800&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1449844908441-8829872d2607?w=800&h=400&fit=crop'
                ],
                attachments: ['competition.pdf'],
                content: `
                    <p>为增强全校师生的环保意识，培养学生的环保素养，学校决定举办2024年"绿色校园"环保知识竞赛。</p>
                    
                    <h3>竞赛时间</h3>
                    <ul>
                        <li>初赛报名：8月15日-8月20日</li>
                        <li>初赛考试：8月22日下午3:00</li>
                        <li>决赛：8月25日</li>
                    </ul>
                    
                    <h3>竞赛范围</h3>
                    <ul>
                        <li>全校高一、高二、高三年级学生</li>
                        <li>以班级为单位报名，每班选派3名代表参加初赛</li>
                    </ul>
                    
                    <h3>竞赛内容</h3>
                    <p>环保法律法规、生态文明建设、垃圾分类、节能减排等相关知识。</p>
                    
                    <h3>奖励</h3>
                    <ul>
                        <li>一等奖：班级加分、证书</li>
                        <li>二等奖：班级加分、证书</li>
                        <li>三等奖：班级加分、证书</li>
                    </ul>
                `
            },
            5: {
                id: 5,
                title: '教室空调维护保养通知',
                category: 'notice',
                date: '2024-08-10',
                author: '总务处',
                badge: 'normal',
                views: 123,
                images: [
                    'https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800&h=400&fit=crop'
                ],
                attachments: [],
                content: `
                    <p>为确保教室空调在新学期能够正常运行，总务处将对全校教室的空调进行集中维护和保养。</p>
                    
                    <h3>维护时间</h3>
                    <p><strong>8月10日至8月15日</strong>（工作日上午8:00-12:00，下午14:00-17:00）</p>
                    
                    <h3>维护范围</h3>
                    <ul>
                        <li>所有教室空调机组</li>
                        <li>空调管道系统</li>
                        <li>室内外机清洗</li>
                        <li>制冷剂检查补充</li>
                    </ul>
                    
                    <h3>注意事项</h3>
                    <ul>
                        <li>维护期间各班级请配合进班检修</li>
                        <li>不要随意挪动空调设备</li>
                        <li>如发现故障，请立即报告总务处</li>
                        <li>联系电话：010-5555-5555</li>
                    </ul>
                `
            },
            6: {
                id: 6,
                title: '高考英语听力题库更新',
                category: 'academic',
                date: '2024-08-08',
                author: '教务处',
                badge: 'normal',
                views: 89,
                images: [
                    'https://images.unsplash.com/photo-1503676260728-1c00da068326?w=800&h=400&fit=crop'
                ],
                attachments: ['listening.zip', 'answer_key.pdf'],
                content: `
                    <p>学校英语组已更新2024年高考听力模拟题库，现向全校高三年级学生发布。</p>
                    
                    <h3>题库内容</h3>
                    <ul>
                        <li>20套听力模拟试题</li>
                        <li>音频文件（MP3格式）</li>
                        <li>答案和解析</li>
                        <li>听力材料文本</li>
                    </ul>
                    
                    <h3>使用建议</h3>
                    <p>各位同学可以按照以下计划使用题库：</p>
                    <ul>
                        <li>每周2-3次听力练习</li>
                        <li>第一遍听全文，做题目</li>
                        <li>第二遍暂停听，逐句理解</li>
                        <li>第三遍完整听，检查答案</li>
                    </ul>
                    
                    <h3>下载链接</h3>
                    <p>请登录学校内网系统下载，或在班主任处领取U盘版本。</p>
                `
            },
            7: {
                id: 7,
                title: '学生宿舍开放时间调整公告',
                category: 'notice',
                date: '2024-08-05',
                author: '学生处',
                badge: 'normal',
                views: 167,
                images: [
                    'https://images.unsplash.com/photo-1517457373614-b7152f800fd1?w=800&h=400&fit=crop'
                ],
                attachments: [],
                content: `
                    <p>为进一步加强学生宿舍管理，确保学生安全，学生处决定调整学生宿舍的开放时间。</p>
                    
                    <h3>新的开放时间（2024年秋季学期起）</h3>
                    <ul>
                        <li><strong>工作日：</strong>6:30-22:30</li>
                        <li><strong>周末：</strong>6:30-23:00</li>
                        <li><strong>假期：</strong>24小时开放（仅宿舍长及留校学生可进入）</li>
                    </ul>
                    
                    <h3>宿舍卫生检查</h3>
                    <ul>
                        <li>周一、周三、周五进行卫生检查</li>
                        <li>检查时间：下午16:00-17:00</li>
                        <li>评分结果纳入班级考评</li>
                    </ul>
                    
                    <h3>宿舍规定</h3>
                    <ul>
                        <li>禁止使用大功率电器</li>
                        <li>禁止私拉电线</li>
                        <li>保持宿舍整洁卫生</li>
                        <li>遵守宿舍纪律，11:00必须关灯就寝</li>
                    </ul>
                `
            }
        };

        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id') || 1;
            loadAnnouncement(id);
        });

        // 加载公告详情
        function loadAnnouncement(id) {
            const announcement = announcementsMap[id];
            if (!announcement) {
                document.getElementById('announcementDetail').innerHTML = '<div class="p-8 text-center text-red-400"><i class="fas fa-exclamation-circle text-4xl mb-4"></i><p>公告不存在</p></div>';
                return;
            }

            // 构建轮播HTML
            let carouselHTML = '';
            if (announcement.images && announcement.images.length > 0) {
                carouselHTML = `
                    <div class="carousel relative bg-gray-900 h-96 mb-8">
                        ${announcement.images.map((img, idx) => `
                            <div class="carousel-slide ${idx === 0 ? 'active' : ''}">
                                <img src="${img}" alt="图片${idx + 1}">
                            </div>
                        `).join('')}
                        
                        ${announcement.images.length > 1 ? `
                            <button class="carousel-nav prev" onclick="prevSlide()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="carousel-nav next" onclick="nextSlide()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <div class="carousel-dots">
                                ${announcement.images.map((_, idx) => `
                                    <button class="dot ${idx === 0 ? 'active' : ''}" onclick="goToSlide(${idx})"></button>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // 构建附件HTML
            let attachmentsHTML = '';
            if (announcement.attachments && announcement.attachments.length > 0) {
                attachmentsHTML = `
                    <div class="mt-8 p-6 glass-light rounded-xl">
                        <h4 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <i class="fas fa-paperclip"></i>相关附件
                        </h4>
                        <div class="space-y-2">
                            ${announcement.attachments.map(file => `
                                <a href="#" class="flex items-center gap-3 text-blue-300 hover:text-blue-100 transition p-2 rounded-lg hover:bg-white/5">
                                    <i class="fas fa-file text-lg"></i>
                                    <span>${file}</span>
                                    <i class="fas fa-download text-sm ml-auto"></i>
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // 获取徽章样式
            const badgeClass = {
                'important': 'badge-important',
                'hot': 'badge-hot',
                'normal': 'badge-normal'
            }[announcement.badge] || 'badge-normal';

            const badgeText = {
                'important': '<i class="fas fa-exclamation-circle mr-1"></i>重要',
                'hot': '<i class="fas fa-fire mr-1"></i>热点',
                'normal': '<i class="fas fa-bell mr-1"></i>通知'
            }[announcement.badge] || '通知';

            // 填充详情页面
            document.getElementById('announcementDetail').innerHTML = `
                ${carouselHTML}
                
                <div class="p-8 sm:p-12">
                    <!-- 标题和元信息 -->
                    <div class="mb-8 border-b border-white/10 pb-8">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="badge-tag ${badgeClass}">
                                ${badgeText}
                            </span>
                            <span class="text-xs text-blue-200">
                                <i class="fas fa-bookmark mr-1"></i>${announcement.category === 'notice' ? '通知公告' : announcement.category === 'event' ? '校园活动' : announcement.category === 'news' ? '校园新闻' : '教学通知'}
                            </span>
                        </div>
                        
                        <h1 class="text-3xl sm:text-4xl font-bold text-white mb-6 leading-tight">
                            ${announcement.title}
                        </h1>
                        
                        <div class="flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-8 text-blue-200 text-sm">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-calendar-alt"></i>
                                <span>${announcement.date}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-user"></i>
                                <span>${announcement.author}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-eye"></i>
                                <span>${announcement.views} 次阅读</span>
                            </div>
                            <button class="text-blue-300 hover:text-white transition ml-auto" onclick="shareAnnouncement()">
                                <i class="fas fa-share-alt mr-2"></i>分享
                            </button>
                        </div>
                    </div>
                    
                    <!-- 正文内容 -->
                    <div class="article-content text-blue-100 text-base leading-relaxed mb-8">
                        ${announcement.content}
                    </div>
                    
                    ${attachmentsHTML}
                    
                    <!-- 操作按钮 -->
                    <div class="mt-8 flex gap-4 flex-wrap">
                        <button class="btn-primary text-white px-6 py-3 rounded-lg font-medium hover:shadow-lg transition flex items-center gap-2" onclick="printAnnouncement()">
                            <i class="fas fa-print"></i>打印
                        </button>
                        <button class="glass-light text-white px-6 py-3 rounded-lg font-medium hover:bg-white/20 transition flex items-center gap-2" onclick="shareAnnouncement()">
                            <i class="fas fa-share"></i>分享
                        </button>
                        <button class="glass-light text-white px-6 py-3 rounded-lg font-medium hover:bg-white/20 transition flex items-center gap-2" onclick="collectAnnouncement()">
                            <i class="fas fa-heart"></i>收藏
                        </button>
                        <button class="glass-light text-white px-6 py-3 rounded-lg font-medium hover:bg-white/20 transition flex items-center gap-2" onclick="reportAnnouncement()">
                            <i class="fas fa-flag"></i>举报
                        </button>
                    </div>
                </div>
            `;

            // 加载相关公告
            loadRelatedAnnouncements(announcement.category, id);

            // 初始化轮播
            if (announcement.images && announcement.images.length > 0) {
                window.currentSlide = 0;
                window.totalSlides = announcement.images.length;
            }
        }

        // 轮播函数
        function prevSlide() {
            window.currentSlide = (window.currentSlide - 1 + window.totalSlides) % window.totalSlides;
            updateCarousel();
        }

        function nextSlide() {
            window.currentSlide = (window.currentSlide + 1) % window.totalSlides;
            updateCarousel();
        }

        function goToSlide(n) {
            window.currentSlide = n;
            updateCarousel();
        }

        function updateCarousel() {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.dot');
            
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            if (slides[window.currentSlide]) {
                slides[window.currentSlide].classList.add('active');
            }
            if (dots[window.currentSlide]) {
                dots[window.currentSlide].classList.add('active');
            }
        }

        // 加载相关公告
        function loadRelatedAnnouncements(category, currentId) {
            const related = Object.values(announcementsMap)
                .filter(item => item.category === category && item.id !== parseInt(currentId))
                .slice(0, 3);

            const container = document.getElementById('relatedAnnouncements');
            container.innerHTML = related.map(item => `
                <div class="glass rounded-xl overflow-hidden card-hover group cursor-pointer" onclick="window.location.href='announcement-detail.html?id=${item.id}'">
                    <div class="h-40 overflow-hidden">
                        <img src="${item.images[0]}" alt="${item.title}" class="w-full h-full object-cover group-hover:scale-110 transition duration-300">
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold text-white text-sm group-hover:text-blue-300 transition line-clamp-2 mb-2">
                            ${item.title}
                        </h4>
                        <div class="flex items-center justify-between text-xs text-blue-200">
                            <span><i class="fas fa-calendar-alt mr-1"></i>${item.date}</span>
                            <span><i class="fas fa-user mr-1"></i>${item.author}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 操作功能
        function printAnnouncement() {
            window.print();
        }

        function shareAnnouncement() {
            const title = document.querySelector('h1')?.textContent || '学校公告';
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: title,
                    url: url
                });
            } else {
                alert('分享链接：' + url);
            }
        }

        function collectAnnouncement() {
            alert('已收藏！');
        }

        function reportAnnouncement() {
            alert('感谢您的反馈，我们会认真处理。');
        }

        // 提交留言
        function submitComment(e) {
            e.preventDefault();
            const name = e.target.querySelector('input[type="text"]').value;
            const content = e.target.querySelector('textarea').value;
            
            const comment = `
                <div class="glass-light rounded-lg p-4">
                    <div class="flex items-center justify-between mb-2">
                        <p class="font-bold text-white">${name}</p>
                        <p class="text-xs text-blue-200">刚刚</p>
                    </div>
                    <p class="text-blue-100">${content}</p>
                </div>
            `;
            
            document.getElementById('commentsContainer').insertAdjacentHTML('afterbegin', comment);
            e.target.reset();
        }
    </script>
</body>
</html>
